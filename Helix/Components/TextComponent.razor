@using Blazor.Diagrams.Components.Renderers;
@using Helix.Nodes
@using System.Diagnostics

@inject IJSRuntime Js

<style>
    .custom-node {
        min-width: 300px;
    }

    .custom-node .port {
        position: absolute;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background-color: #79bcdb;
        border: 3px solid #29A9E5;
        cursor: pointer;
        visibility: visible;
        transform: translate(-50%, -100%);
    }
    
    .custom-node .port.left {
        top: 50%;
        left: 0;
    }
    
    .custom-node .port.right {
        top: 50%;
        left: 100%;
    }
    
    .custom-node .port:hover, .custom-node .port.has-links {
        background-color: black;
    }
    
    .helix-text-component {
    
    }
</style>

<MudCard Class="pa-8 ma-0 custom-node"
         @onkeydown:stopPropagation @onkeyup:stopPropagation
         @oncontextmenu:stopPropagation>
    <MudTextField T="string"
                  Class="helix-text-component"
                  DisableUnderLine="true"
                  Variant="Variant.Outlined" Lines="5"
                  @bind-Value="@Node.Text"
                  @onmousedown:stopPropagation @onmousemove:stopPropagation @onmouseup:stopPropagation
                  @onwheel:stopPropagation/>
    @foreach (var port in Node.Ports)
    {
        <PortRenderer Port="port">
        </PortRenderer>
    }
</MudCard>

@code {
    [Parameter] [EditorRequired]
    public required TextNode Node { get; set; }
}